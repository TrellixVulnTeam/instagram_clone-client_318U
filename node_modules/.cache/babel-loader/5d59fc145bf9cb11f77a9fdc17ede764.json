{"ast":null,"code":"import _slicedToArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import LoadingIcon from\"../../assets/images/loading.gif\";import{NOTIFY_TYPES}from\"../../redux/types/notifyTypes\";import{getDataAPI}from\"../../utils/fetchData\";import UserCard from\"../UserCard\";import\"./index.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InputSearch=function InputSearch(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchValue=_useState2[0],setSearchValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var dispatch=useDispatch();useEffect(function(){if(searchValue){setLoad(true);getDataAPI(\"search?username=\".concat(searchValue),auth.token).then(function(res){setUsers(res.data.users);setLoad(false);}).catch(function(err){dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:err.response.data.msg}});setLoad(true);});}else{setUsers([]);setLoad(false);}},[searchValue,auth.token,dispatch]);var handleClose=function handleClose(){setSearchValue(\"\");setUsers([]);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchValue,onChange:function onChange(e){return setSearchValue(e.target.value.toLowerCase().replace(/ /g,\"\"));},className:\"search-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-icon\",style:{opacity:searchValue?0:1},children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Search\"})]}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadingIcon,alt:\"Loading\",className:\"search-loading\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-close\",style:{opacity:users.length===0?0:1},onClick:handleClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-users\",style:{display:users.length===0?\"none\":\"block\"},children:searchValue&&users.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,handleClose:handleClose},user._id);})})]})})});};export default InputSearch;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/components/InputSearch/index.js"],"names":["React","useEffect","useState","useDispatch","useSelector","LoadingIcon","NOTIFY_TYPES","getDataAPI","UserCard","InputSearch","state","auth","searchValue","setSearchValue","users","setUsers","load","setLoad","dispatch","token","then","res","data","catch","err","type","NOTIFY","payload","error","response","msg","handleClose","e","target","value","toLowerCase","replace","opacity","length","display","map","user","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport LoadingIcon from \"../../assets/images/loading.gif\";\r\nimport { NOTIFY_TYPES } from \"../../redux/types/notifyTypes\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport UserCard from \"../UserCard\";\r\nimport \"./index.scss\";\r\nconst InputSearch = () => {\r\n  const { auth } = useSelector((state) => state);\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n  const [load, setLoad] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (searchValue) {\r\n      setLoad(true);\r\n      getDataAPI(`search?username=${searchValue}`, auth.token)\r\n        .then((res) => {\r\n          setUsers(res.data.users);\r\n          setLoad(false);\r\n        })\r\n        .catch((err) => {\r\n          dispatch({\r\n            type: NOTIFY_TYPES.NOTIFY,\r\n            payload: { error: err.response.data.msg },\r\n          });\r\n          setLoad(true);\r\n        });\r\n    } else {\r\n      setUsers([]);\r\n      setLoad(false);\r\n    }\r\n  }, [searchValue, auth.token, dispatch]);\r\n\r\n  const handleClose = () => {\r\n    setSearchValue(\"\");\r\n    setUsers([]);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"search-container\">\r\n        <form className=\"search-form\">\r\n          <input\r\n            type=\"text\"\r\n            value={searchValue}\r\n            onChange={(e) =>\r\n              setSearchValue(e.target.value.toLowerCase().replace(/ /g, \"\"))\r\n            }\r\n            className=\"search-input\"\r\n          />\r\n\r\n          <div className=\"search-icon\" style={{ opacity: searchValue ? 0 : 1 }}>\r\n            <span className=\"material-icons\">search</span>\r\n            <span>Search</span>\r\n          </div>\r\n\r\n          {load && (\r\n            <img src={LoadingIcon} alt=\"Loading\" className=\"search-loading\" />\r\n          )}\r\n\r\n          <div\r\n            className=\"search-close\"\r\n            style={{ opacity: users.length === 0 ? 0 : 1 }}\r\n            onClick={handleClose}\r\n          >\r\n            &times;\r\n          </div>\r\n          <div\r\n            className=\"search-users\"\r\n            style={{ display: users.length === 0 ? \"none\" : \"block\" }}\r\n          >\r\n            {searchValue &&\r\n              users.map((user) => (\r\n                <UserCard\r\n                  key={user._id}\r\n                  user={user}\r\n                  handleClose={handleClose}\r\n                />\r\n              ))}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InputSearch;\r\n"]},"metadata":{},"sourceType":"module"}