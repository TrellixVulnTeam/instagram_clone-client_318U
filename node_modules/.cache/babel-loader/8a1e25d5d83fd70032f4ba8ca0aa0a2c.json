{"ast":null,"code":"import Peer from\"peerjs\";import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Route,Switch}from\"react-router-dom\";import io from\"socket.io-client\";import\"./App.scss\";import CallModal from\"./components/CallModal\";import Header from\"./components/Header\";import Notify from\"./components/Notify\";import PostModal from\"./components/PostModal\";import StatusModal from\"./components/Status/StatusModal\";import PrivateRoute from\"./customHook/PrivateRoute\";import LikedUsers from\"./layouts/LikedUsers\";import ChangePasswordPage from\"./pages/ChangePasswordPage\";import DiscoverPage from\"./pages/DiscoverPage/index\";import EditPage from\"./pages/EditPage\";import ExploreAll from\"./pages/ExploreAll\";import ForgotPasswordPage from\"./pages/FogotPasswordPage\";import HomePage from\"./pages/HomePage\";import LoginPage from\"./pages/LoginPage\";import MessagePage from\"./pages/MessagePage/index\";import MessageUser from\"./pages/MessageUser\";import PageNotFound from\"./pages/PageNotFound/PageNotFound\";import PostDetails from\"./pages/PostDetails\";import ProfilePage from\"./pages/ProfilePage/index\";import RegisterPage from\"./pages/RegisterPage\";import ResetPasswordPage from\"./pages/ResetPasswordPage\";import{refreshToken}from\"./redux/actions/authActions\";import{getNewsNotifies}from\"./redux/actions/newsActions\";import{getPosts}from\"./redux/actions/postActions\";import{getSuggestionsAction}from\"./redux/actions/suggestionActions\";import{PEER_TYPES}from\"./redux/types/peerTypes\";import{SOCKET_TYPES}from\"./redux/types/socketTypes\";import SocketClient from\"./socketClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,status=_useSelector.status,modal=_useSelector.modal,call=_useSelector.call,postModal=_useSelector.postModal,likedUsers=_useSelector.likedUsers;var dispatch=useDispatch();useEffect(function(){dispatch(refreshToken());var socket=io();dispatch({type:SOCKET_TYPES.SOCKET,payload:socket});return function(){return socket.close();};},[dispatch]);useEffect(function(){if(auth.token){dispatch(getPosts(auth.token));dispatch(getSuggestionsAction(auth.token));dispatch(getNewsNotifies(auth.token));}},[dispatch,auth.token]);useEffect(function(){var newPeer=new Peer(undefined,{path:\"/\",secure:true});dispatch({type:PEER_TYPES.PEER,payload:newPeer});},[dispatch]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat((status||modal)&&\"modals\"),children:[/*#__PURE__*/_jsx(Notify,{}),auth.token&&/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"80px\"}}),status&&/*#__PURE__*/_jsx(StatusModal,{}),auth.token&&/*#__PURE__*/_jsx(SocketClient,{}),call&&/*#__PURE__*/_jsx(CallModal,{}),postModal&&/*#__PURE__*/_jsx(PostModal,{}),likedUsers&&/*#__PURE__*/_jsx(LikedUsers,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:auth.token?HomePage:LoginPage}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",component:RegisterPage}),/*#__PURE__*/_jsx(Route,{path:\"/forgotPassword\",component:ForgotPasswordPage}),/*#__PURE__*/_jsx(Route,{path:\"/reset/:token\",component:ResetPasswordPage}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/profile/:id\",component:ProfilePage}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/post/:id\",component:PostDetails}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/discover\",component:DiscoverPage}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/exploreAll\",component:ExploreAll}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/message\",component:MessagePage}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/message/:id\",component:MessageUser}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/edit\",component:EditPage}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/changePassword\",component:ChangePasswordPage}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"*\",component:PageNotFound})]})]})});}export default App;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/App.js"],"names":["Peer","useEffect","useDispatch","useSelector","Route","Switch","io","CallModal","Header","Notify","PostModal","StatusModal","PrivateRoute","LikedUsers","ChangePasswordPage","DiscoverPage","EditPage","ExploreAll","ForgotPasswordPage","HomePage","LoginPage","MessagePage","MessageUser","PageNotFound","PostDetails","ProfilePage","RegisterPage","ResetPasswordPage","refreshToken","getNewsNotifies","getPosts","getSuggestionsAction","PEER_TYPES","SOCKET_TYPES","SocketClient","App","state","auth","status","modal","call","postModal","likedUsers","dispatch","socket","type","SOCKET","payload","close","token","newPeer","undefined","path","secure","PEER","paddingTop"],"mappings":"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","sourcesContent":["import Peer from \"peerjs\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport \"./App.scss\";\nimport CallModal from \"./components/CallModal\";\nimport Header from \"./components/Header\";\nimport Notify from \"./components/Notify\";\nimport PostModal from \"./components/PostModal\";\nimport StatusModal from \"./components/Status/StatusModal\";\nimport PrivateRoute from \"./customHook/PrivateRoute\";\nimport LikedUsers from \"./layouts/LikedUsers\";\nimport ChangePasswordPage from \"./pages/ChangePasswordPage\";\nimport DiscoverPage from \"./pages/DiscoverPage/index\";\nimport EditPage from \"./pages/EditPage\";\nimport ExploreAll from \"./pages/ExploreAll\";\nimport ForgotPasswordPage from \"./pages/FogotPasswordPage\";\nimport HomePage from \"./pages/HomePage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport MessagePage from \"./pages/MessagePage/index\";\nimport MessageUser from \"./pages/MessageUser\";\nimport PageNotFound from \"./pages/PageNotFound/PageNotFound\";\nimport PostDetails from \"./pages/PostDetails\";\nimport ProfilePage from \"./pages/ProfilePage/index\";\nimport RegisterPage from \"./pages/RegisterPage\";\nimport ResetPasswordPage from \"./pages/ResetPasswordPage\";\nimport { refreshToken } from \"./redux/actions/authActions\";\nimport { getNewsNotifies } from \"./redux/actions/newsActions\";\nimport { getPosts } from \"./redux/actions/postActions\";\nimport { getSuggestionsAction } from \"./redux/actions/suggestionActions\";\nimport { PEER_TYPES } from \"./redux/types/peerTypes\";\nimport { SOCKET_TYPES } from \"./redux/types/socketTypes\";\nimport SocketClient from \"./socketClient\";\nfunction App() {\n  const { auth, status, modal, call, postModal, likedUsers } = useSelector(\n    (state) => state\n  );\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(refreshToken());\n    const socket = io();\n    dispatch({\n      type: SOCKET_TYPES.SOCKET,\n      payload: socket,\n    });\n\n    return () => socket.close();\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (auth.token) {\n      dispatch(getPosts(auth.token));\n      dispatch(getSuggestionsAction(auth.token));\n      dispatch(getNewsNotifies(auth.token));\n    }\n  }, [dispatch, auth.token]);\n\n  useEffect(() => {\n    const newPeer = new Peer(undefined, {\n      path: \"/\",\n      secure: true,\n    });\n    dispatch({\n      type: PEER_TYPES.PEER,\n      payload: newPeer,\n    });\n  }, [dispatch]);\n\n  return (\n    <>\n      <div className={`App ${(status || modal) && \"modals\"}`}>\n        <Notify />\n        {auth.token && <Header />}\n        <div style={{ paddingTop: \"80px\" }}></div>\n        {status && <StatusModal />}\n        {auth.token && <SocketClient />}\n        {call && <CallModal />}\n        {postModal && <PostModal />}\n        {likedUsers && <LikedUsers />}\n        <Switch>\n          <Route exact path=\"/\" component={auth.token ? HomePage : LoginPage} />\n          <Route path=\"/signup\" component={RegisterPage} />\n          <Route path=\"/forgotPassword\" component={ForgotPasswordPage} />\n          <Route path=\"/reset/:token\" component={ResetPasswordPage} />\n          <PrivateRoute path=\"/profile/:id\" component={ProfilePage} />\n          <PrivateRoute path=\"/post/:id\" component={PostDetails} />\n          <PrivateRoute path=\"/discover\" component={DiscoverPage} />\n          <PrivateRoute path=\"/exploreAll\" component={ExploreAll} />\n          <PrivateRoute exact path=\"/message\" component={MessagePage} />\n          <PrivateRoute exact path=\"/message/:id\" component={MessageUser} />\n          <PrivateRoute path=\"/edit\" component={EditPage} />\n          <PrivateRoute path=\"/changePassword\" component={ChangePasswordPage} />\n          <PrivateRoute path=\"*\" component={PageNotFound} />\n        </Switch>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}