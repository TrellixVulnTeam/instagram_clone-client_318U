{"ast":null,"code":"import _regeneratorRuntime from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import LoadMoreBtn from\"../../components/LoadMoreBtn\";import PostThumb from\"../../components/PostProfile/PostThumb\";import LoadingIcon from\"../../assets/images/loading.gif\";import\"./index.scss\";import{getDataAPI}from\"../../utils/fetchData\";import{NOTIFY_TYPES}from\"../../redux/types/notifyTypes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SavedPost=function SavedPost(_ref){var auth=_ref.auth,dispatch=_ref.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savedPosts=_useState2[0],setSavedPosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){setLoad(true);getDataAPI(\"getSavePost\",auth.token).then(function(res){setSavedPosts(res.data.savePosts);setResult(res.data.result);setLoad(false);}).catch(function(err){dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:err.response.data.msg}});});return function(){return setSavedPosts([]);};},[auth.token,dispatch]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"getSavePost?limit=\".concat(page*9),auth.token);case 3:res=_context.sent;setSavedPosts(res.data.savePosts);setResult(res.data.result);setPage(page+1);setLoad(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"savedPost-container\",children:auth.user.saved.length===0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"savedPost-warning\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"savedPost-heading\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Only you can see what you're saved\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"savePost-link\",children:\"New Collection\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"savedPost-contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"savedPost-logo\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-bookmark\"})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Save\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Save photos and videos that you want to see again. No one is notified, and only you can see what you've saved.\"})]})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-profile-container\",children:[/*#__PURE__*/_jsx(PostThumb,{posts:savedPosts,result:result}),load&&/*#__PURE__*/_jsx(\"div\",{className:\"post-profile-loading\",children:/*#__PURE__*/_jsx(\"img\",{src:LoadingIcon,alt:\"Logo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"post-profile-btn\",children:/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})})]})})})});};export default SavedPost;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/layouts/SavedPost/index.js"],"names":["React","useEffect","useState","Link","LoadMoreBtn","PostThumb","LoadingIcon","getDataAPI","NOTIFY_TYPES","SavedPost","auth","dispatch","savedPosts","setSavedPosts","result","setResult","page","setPage","load","setLoad","token","then","res","data","savePosts","catch","err","type","NOTIFY","payload","error","response","msg","handleLoadMore","user","saved","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoadMoreBtn from \"../../components/LoadMoreBtn\";\r\nimport PostThumb from \"../../components/PostProfile/PostThumb\";\r\nimport LoadingIcon from \"../../assets/images/loading.gif\";\r\nimport \"./index.scss\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport { NOTIFY_TYPES } from \"../../redux/types/notifyTypes\";\r\nconst SavedPost = ({ auth, dispatch }) => {\r\n  const [savedPosts, setSavedPosts] = useState([]);\r\n  const [result, setResult] = useState(9);\r\n  const [page, setPage] = useState(2);\r\n  const [load, setLoad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoad(true);\r\n    getDataAPI(\"getSavePost\", auth.token)\r\n      .then((res) => {\r\n        setSavedPosts(res.data.savePosts);\r\n        setResult(res.data.result);\r\n        setLoad(false);\r\n      })\r\n      .catch((err) => {\r\n        dispatch({\r\n          type: NOTIFY_TYPES.NOTIFY,\r\n          payload: { error: err.response.data.msg },\r\n        });\r\n      });\r\n    return () => setSavedPosts([]);\r\n  }, [auth.token, dispatch]);\r\n\r\n  const handleLoadMore = async () => {\r\n    setLoad(true);\r\n    const res = await getDataAPI(`getSavePost?limit=${page * 9}`, auth.token);\r\n    setSavedPosts(res.data.savePosts);\r\n    setResult(res.data.result);\r\n    setPage(page + 1);\r\n    setLoad(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"savedPost-container\">\r\n        {auth.user.saved.length === 0 ? (\r\n          <>\r\n            <div className=\"savedPost-warning\">\r\n              <div className=\"savedPost-heading\">\r\n                <h4>Only you can see what you're saved</h4>\r\n                <Link to=\"/\" className=\"savePost-link\">\r\n                  New Collection\r\n                </Link>\r\n              </div>\r\n              <div className=\"savedPost-contents\">\r\n                <div className=\"savedPost-logo\">\r\n                  <i className=\"far fa-bookmark\"></i>\r\n                </div>\r\n                <h3>Save</h3>\r\n                <span>\r\n                  Save photos and videos that you want to see again. No one is\r\n                  notified, and only you can see what you've saved.\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div className=\"post-profile-container\">\r\n              <PostThumb posts={savedPosts} result={result} />\r\n              {load && (\r\n                <div className=\"post-profile-loading\">\r\n                  <img src={LoadingIcon} alt=\"Logo\" />\r\n                </div>\r\n              )}\r\n              <div className=\"post-profile-btn\">\r\n                <LoadMoreBtn\r\n                  result={result}\r\n                  page={page}\r\n                  load={load}\r\n                  handleLoadMore={handleLoadMore}\r\n                />\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SavedPost;\r\n"]},"metadata":{},"sourceType":"module"}