{"ast":null,"code":"import _regeneratorRuntime from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import Send from\"../../../../assets/images/send.svg\";import LikeButton from\"../../../LikeButton\";import{useDispatch,useSelector}from\"react-redux\";import\"./index.scss\";import{likePostAction,savePostAction,unLikePostAction,unSavePostAction}from\"../../../../redux/actions/postActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CardActions=function CardActions(_ref){var post=_ref.post;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadLike=_useState4[0],setLoadLike=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),saved=_useState6[0],setSaved=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),saveLoad=_useState8[0],setSaveLoad=_useState8[1];var dispatch=useDispatch();useEffect(function(){if(post.likes.find(function(like){return like._id===auth.user._id;})){setIsLike(true);}else{setIsLike(false);}},[post.likes,auth.user._id]);useEffect(function(){if(auth.user.saved.find(function(id){return id===post._id;})){setSaved(true);}else{setSaved(false);}},[auth.user.saved,post._id]);var handleLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loadLike){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoadLike(true);dispatch(likePostAction({post:post,auth:auth,socket:socket}));setLoadLike(false);case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleLike(){return _ref2.apply(this,arguments);};}();var handleUnLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!loadLike){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoadLike(true);dispatch(unLikePostAction({post:post,auth:auth,socket:socket}));setLoadLike(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnLike(){return _ref3.apply(this,arguments);};}();var handleSavePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!saveLoad){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setSaveLoad(true);_context3.next=5;return dispatch(savePostAction({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSavePost(){return _ref4.apply(this,arguments);};}();var handleUnSavePost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!saveLoad){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:setSaveLoad(true);_context4.next=5;return dispatch(unSavePostAction({post:post,auth:auth}));case 5:setSaveLoad(false);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUnSavePost(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card-actions-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-actions-menu\",children:[/*#__PURE__*/_jsx(LikeButton,{isLike:isLike,handleLike:handleLike,handleUnLike:handleUnLike}),/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post._id),className:\"card-actions-link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-comment\"})}),/*#__PURE__*/_jsx(\"img\",{src:Send,alt:\"Send\",className:\"card-actions-send\"}),saved?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bookmark warning\",onClick:handleUnSavePost}):/*#__PURE__*/_jsx(\"i\",{className:\"far fa-bookmark\",onClick:handleSavePost})]})})});};export default CardActions;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/components/PostCards/CardFooter/CardActions/index.js"],"names":["React","useEffect","useState","Link","LikeButton","useDispatch","useSelector","likePostAction","savePostAction","unLikePostAction","unSavePostAction","CardActions","post","state","auth","socket","isLike","setIsLike","loadLike","setLoadLike","saved","setSaved","saveLoad","setSaveLoad","dispatch","likes","find","like","_id","user","id","handleLike","handleUnLike","handleSavePost","handleUnSavePost","Send"],"mappings":"idAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,C,qDAEA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAO,cAAP,CACA,OACEC,cADF,CAEEC,cAFF,CAGEC,gBAHF,CAIEC,gBAJF,KAKO,uCALP,C,6IAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CAChC,iBAAyBN,WAAW,CAAC,SAACO,KAAD,QAAWA,CAAAA,KAAX,EAAD,CAApC,CAAQC,IAAR,cAAQA,IAAR,CAAcC,MAAd,cAAcA,MAAd,CACA,cAA4Bb,QAAQ,CAAC,KAAD,CAApC,wCAAOc,MAAP,eAAeC,SAAf,eACA,eAAgCf,QAAQ,CAAC,KAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eACA,eAA0BjB,QAAQ,CAAC,KAAD,CAAlC,yCAAOkB,KAAP,eAAcC,QAAd,eACA,eAAgCnB,QAAQ,CAAC,KAAD,CAAxC,yCAAOoB,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,QAAQ,CAAGnB,WAAW,EAA5B,CAEAJ,SAAS,CAAC,UAAM,CACd,GAAIW,IAAI,CAACa,KAAL,CAAWC,IAAX,CAAgB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,GAAL,GAAad,IAAI,CAACe,IAAL,CAAUD,GAAjC,EAAhB,CAAJ,CAA2D,CACzDX,SAAS,CAAC,IAAD,CAAT,CACD,CAFD,IAEO,CACLA,SAAS,CAAC,KAAD,CAAT,CACD,CACF,CANQ,CAMN,CAACL,IAAI,CAACa,KAAN,CAAaX,IAAI,CAACe,IAAL,CAAUD,GAAvB,CANM,CAAT,CAQA3B,SAAS,CAAC,UAAM,CACd,GAAIa,IAAI,CAACe,IAAL,CAAUT,KAAV,CAAgBM,IAAhB,CAAqB,SAACI,EAAD,QAAQA,CAAAA,EAAE,GAAKlB,IAAI,CAACgB,GAApB,EAArB,CAAJ,CAAmD,CACjDP,QAAQ,CAAC,IAAD,CAAR,CACD,CAFD,IAEO,CACLA,QAAQ,CAAC,KAAD,CAAR,CACD,CACF,CANQ,CAMN,CAACP,IAAI,CAACe,IAAL,CAAUT,KAAX,CAAkBR,IAAI,CAACgB,GAAvB,CANM,CAAT,CAQA,GAAMG,CAAAA,UAAU,2FAAG,uIACbb,QADa,iEAEjBC,WAAW,CAAC,IAAD,CAAX,CACAK,QAAQ,CAACjB,cAAc,CAAC,CAAEK,IAAI,CAAJA,IAAF,CAAQE,IAAI,CAAJA,IAAR,CAAcC,MAAM,CAANA,MAAd,CAAD,CAAf,CAAR,CACAI,WAAW,CAAC,KAAD,CAAX,CAJiB,sDAAH,kBAAVY,CAAAA,UAAU,2CAAhB,CAOA,GAAMC,CAAAA,YAAY,2FAAG,4IACfd,QADe,mEAEnBC,WAAW,CAAC,IAAD,CAAX,CACAK,QAAQ,CAACf,gBAAgB,CAAC,CAAEG,IAAI,CAAJA,IAAF,CAAQE,IAAI,CAAJA,IAAR,CAAcC,MAAM,CAANA,MAAd,CAAD,CAAjB,CAAR,CACAI,WAAW,CAAC,KAAD,CAAX,CAJmB,wDAAH,kBAAZa,CAAAA,YAAY,2CAAlB,CAOA,GAAMC,CAAAA,cAAc,2FAAG,4IACjBX,QADiB,mEAErBC,WAAW,CAAC,IAAD,CAAX,CAFqB,uBAGfC,CAAAA,QAAQ,CAAChB,cAAc,CAAC,CAAEI,IAAI,CAAJA,IAAF,CAAQE,IAAI,CAAJA,IAAR,CAAD,CAAf,CAHO,QAIrBS,WAAW,CAAC,KAAD,CAAX,CAJqB,wDAAH,kBAAdU,CAAAA,cAAc,2CAApB,CAOA,GAAMC,CAAAA,gBAAgB,2FAAG,4IACnBZ,QADmB,mEAEvBC,WAAW,CAAC,IAAD,CAAX,CAFuB,uBAGjBC,CAAAA,QAAQ,CAACd,gBAAgB,CAAC,CAAEE,IAAI,CAAJA,IAAF,CAAQE,IAAI,CAAJA,IAAR,CAAD,CAAjB,CAHS,QAIvBS,WAAW,CAAC,KAAD,CAAX,CAJuB,wDAAH,kBAAhBW,CAAAA,gBAAgB,2CAAtB,CAOA,mBACE,sCACE,YAAK,SAAS,CAAC,wBAAf,uBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,KAAC,UAAD,EACE,MAAM,CAAElB,MADV,CAEE,UAAU,CAAEe,UAFd,CAGE,YAAY,CAAEC,YAHhB,EADF,cAME,KAAC,IAAD,EAAM,EAAE,iBAAWpB,IAAI,CAACgB,GAAhB,CAAR,CAA+B,SAAS,CAAC,mBAAzC,uBACE,UAAG,SAAS,CAAC,gBAAb,EADF,EANF,cASE,YAAK,GAAG,CAAEO,IAAV,CAAgB,GAAG,CAAC,MAApB,CAA2B,SAAS,CAAC,mBAArC,EATF,CAUGf,KAAK,cACJ,UACE,SAAS,CAAC,yBADZ,CAEE,OAAO,CAAEc,gBAFX,EADI,cAMJ,UAAG,SAAS,CAAC,iBAAb,CAA+B,OAAO,CAAED,cAAxC,EAhBJ,GADF,EADF,EADF,CAyBD,CA7ED,CA+EA,cAAetB,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Send from \"../../../../assets/images/send.svg\";\r\nimport LikeButton from \"../../../LikeButton\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"./index.scss\";\r\nimport {\r\n  likePostAction,\r\n  savePostAction,\r\n  unLikePostAction,\r\n  unSavePostAction,\r\n} from \"../../../../redux/actions/postActions\";\r\nconst CardActions = ({ post }) => {\r\n  const { auth, socket } = useSelector((state) => state);\r\n  const [isLike, setIsLike] = useState(false);\r\n  const [loadLike, setLoadLike] = useState(false);\r\n  const [saved, setSaved] = useState(false);\r\n  const [saveLoad, setSaveLoad] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (post.likes.find((like) => like._id === auth.user._id)) {\r\n      setIsLike(true);\r\n    } else {\r\n      setIsLike(false);\r\n    }\r\n  }, [post.likes, auth.user._id]);\r\n\r\n  useEffect(() => {\r\n    if (auth.user.saved.find((id) => id === post._id)) {\r\n      setSaved(true);\r\n    } else {\r\n      setSaved(false);\r\n    }\r\n  }, [auth.user.saved, post._id]);\r\n\r\n  const handleLike = async () => {\r\n    if (loadLike) return;\r\n    setLoadLike(true);\r\n    dispatch(likePostAction({ post, auth, socket }));\r\n    setLoadLike(false);\r\n  };\r\n\r\n  const handleUnLike = async () => {\r\n    if (loadLike) return;\r\n    setLoadLike(true);\r\n    dispatch(unLikePostAction({ post, auth, socket }));\r\n    setLoadLike(false);\r\n  };\r\n\r\n  const handleSavePost = async () => {\r\n    if (saveLoad) return;\r\n    setSaveLoad(true);\r\n    await dispatch(savePostAction({ post, auth }));\r\n    setSaveLoad(false);\r\n  };\r\n\r\n  const handleUnSavePost = async () => {\r\n    if (saveLoad) return;\r\n    setSaveLoad(true);\r\n    await dispatch(unSavePostAction({ post, auth }));\r\n    setSaveLoad(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"card-actions-container\">\r\n        <div className=\"card-actions-menu\">\r\n          <LikeButton\r\n            isLike={isLike}\r\n            handleLike={handleLike}\r\n            handleUnLike={handleUnLike}\r\n          />\r\n          <Link to={`/post/${post._id}`} className=\"card-actions-link\">\r\n            <i className=\"far fa-comment\"></i>\r\n          </Link>\r\n          <img src={Send} alt=\"Send\" className=\"card-actions-send\" />\r\n          {saved ? (\r\n            <i\r\n              className=\"fas fa-bookmark warning\"\r\n              onClick={handleUnSavePost}\r\n            ></i>\r\n          ) : (\r\n            <i className=\"far fa-bookmark\" onClick={handleSavePost}></i>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CardActions;\r\n"]},"metadata":{},"sourceType":"module"}