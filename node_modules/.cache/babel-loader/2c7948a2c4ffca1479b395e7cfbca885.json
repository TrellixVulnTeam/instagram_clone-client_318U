{"ast":null,"code":"import _regeneratorRuntime from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{followAction,unFollowAction}from\"../../redux/actions/profileActions\";import\"./index.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FollowBtn=function FollowBtn(_ref){var profiles=_ref.profiles,user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,profile=_useSelector.profile,socket=_useSelector.socket;var dispatch=useDispatch();useEffect(function(){if(auth.user.following.find(function(item){return item._id===user._id;})){setFollowed(true);}return function(){return setFollowed(false);};},[auth.user.following,user._id]);var handleFollow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!load){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setFollowed(true);setLoad(true);_context.next=6;return dispatch(followAction({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleFollow(){return _ref2.apply(this,arguments);};}();var handleUnFollow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!load){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setFollowed(false);setLoad(true);_context2.next=6;return dispatch(unFollowAction({users:profile.users,user:user,auth:auth,socket:socket}));case 6:setLoad(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUnFollow(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:followed?/*#__PURE__*/_jsx(\"button\",{className:profiles?\"follow-btn follow-btn-user unfollow\":\"follow-btn follow-btn-suggestion unfollow-sug\",onClick:handleUnFollow,children:\"UnFollow\"}):/*#__PURE__*/_jsx(\"button\",{className:profiles?\"follow-btn follow-btn-user\":\"follow-btn follow-btn-suggestion\",onClick:handleFollow,children:\"Follow\"})});};export default FollowBtn;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/components/FollowBtn/index.js"],"names":["React","useEffect","useState","useDispatch","useSelector","followAction","unFollowAction","FollowBtn","profiles","user","followed","setFollowed","load","setLoad","state","auth","profile","socket","dispatch","following","find","item","_id","handleFollow","users","handleUnFollow"],"mappings":"idAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OACEC,YADF,CAEEC,cAFF,KAGO,oCAHP,CAIA,MAAO,cAAP,C,gGACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAwB,IAArBC,CAAAA,QAAqB,MAArBA,QAAqB,CAAXC,IAAW,MAAXA,IAAW,CACxC,cAAgCP,QAAQ,CAAC,KAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAwBT,QAAQ,CAAC,KAAD,CAAhC,yCAAOU,IAAP,eAAaC,OAAb,eACA,iBAAkCT,WAAW,CAAC,SAACU,KAAD,QAAWA,CAAAA,KAAX,EAAD,CAA7C,CAAQC,IAAR,cAAQA,IAAR,CAAcC,OAAd,cAAcA,OAAd,CAAuBC,MAAvB,cAAuBA,MAAvB,CACA,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAM,CACd,GAAIc,IAAI,CAACN,IAAL,CAAUU,SAAV,CAAoBC,IAApB,CAAyB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,GAAL,GAAab,IAAI,CAACa,GAA5B,EAAzB,CAAJ,CAA+D,CAC7DX,WAAW,CAAC,IAAD,CAAX,CACD,CACD,MAAO,kBAAMA,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAP,CACD,CALQ,CAKN,CAACI,IAAI,CAACN,IAAL,CAAUU,SAAX,CAAsBV,IAAI,CAACa,GAA3B,CALM,CAAT,CAOA,GAAMC,CAAAA,YAAY,2FAAG,uIACfX,IADe,iEAGnBD,WAAW,CAAC,IAAD,CAAX,CACAE,OAAO,CAAC,IAAD,CAAP,CAJmB,sBAKbK,CAAAA,QAAQ,CAACb,YAAY,CAAC,CAAEmB,KAAK,CAAER,OAAO,CAACQ,KAAjB,CAAwBf,IAAI,CAAJA,IAAxB,CAA8BM,IAAI,CAAJA,IAA9B,CAAoCE,MAAM,CAANA,MAApC,CAAD,CAAb,CALK,QAMnBJ,OAAO,CAAC,KAAD,CAAP,CANmB,sDAAH,kBAAZU,CAAAA,YAAY,2CAAlB,CASA,GAAME,CAAAA,cAAc,2FAAG,4IACjBb,IADiB,mEAGrBD,WAAW,CAAC,KAAD,CAAX,CACAE,OAAO,CAAC,IAAD,CAAP,CAJqB,uBAKfK,CAAAA,QAAQ,CACZZ,cAAc,CAAC,CAAEkB,KAAK,CAAER,OAAO,CAACQ,KAAjB,CAAwBf,IAAI,CAAJA,IAAxB,CAA8BM,IAAI,CAAJA,IAA9B,CAAoCE,MAAM,CAANA,MAApC,CAAD,CADF,CALO,QAQrBJ,OAAO,CAAC,KAAD,CAAP,CARqB,wDAAH,kBAAdY,CAAAA,cAAc,2CAApB,CAWA,mBACE,yBACGf,QAAQ,cACP,eACE,SAAS,CACPF,QAAQ,CACJ,qCADI,CAEJ,+CAJR,CAME,OAAO,CAAEiB,cANX,sBADO,cAYP,eACE,SAAS,CACPjB,QAAQ,CACJ,4BADI,CAEJ,kCAJR,CAME,OAAO,CAAEe,YANX,oBAbJ,EADF,CA2BD,CA5DD,CA8DA,cAAehB,CAAAA,SAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  followAction,\r\n  unFollowAction,\r\n} from \"../../redux/actions/profileActions\";\r\nimport \"./index.scss\";\r\nconst FollowBtn = ({ profiles, user }) => {\r\n  const [followed, setFollowed] = useState(false);\r\n  const [load, setLoad] = useState(false);\r\n  const { auth, profile, socket } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (auth.user.following.find((item) => item._id === user._id)) {\r\n      setFollowed(true);\r\n    }\r\n    return () => setFollowed(false);\r\n  }, [auth.user.following, user._id]);\r\n\r\n  const handleFollow = async () => {\r\n    if (load) return;\r\n\r\n    setFollowed(true);\r\n    setLoad(true);\r\n    await dispatch(followAction({ users: profile.users, user, auth, socket }));\r\n    setLoad(false);\r\n  };\r\n\r\n  const handleUnFollow = async () => {\r\n    if (load) return;\r\n\r\n    setFollowed(false);\r\n    setLoad(true);\r\n    await dispatch(\r\n      unFollowAction({ users: profile.users, user, auth, socket })\r\n    );\r\n    setLoad(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {followed ? (\r\n        <button\r\n          className={\r\n            profiles\r\n              ? \"follow-btn follow-btn-user unfollow\"\r\n              : \"follow-btn follow-btn-suggestion unfollow-sug\"\r\n          }\r\n          onClick={handleUnFollow}\r\n        >\r\n          UnFollow\r\n        </button>\r\n      ) : (\r\n        <button\r\n          className={\r\n            profiles\r\n              ? \"follow-btn follow-btn-user\"\r\n              : \"follow-btn follow-btn-suggestion\"\r\n          }\r\n          onClick={handleFollow}\r\n        >\r\n          Follow\r\n        </button>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FollowBtn;\r\n"]},"metadata":{},"sourceType":"module"}