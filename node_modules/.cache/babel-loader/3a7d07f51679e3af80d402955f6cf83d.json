{"ast":null,"code":"import _toConsumableArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{deleteDataAPI,getDataAPI,patchDataAPI,postDataAPI}from\"../../utils/fetchData\";import{imageUpload}from\"../../utils/imageUpload\";import{AUTH_TYPES}from\"../types/authTypes\";import{deleteData,editData}from\"../types/globalTypes\";import{NOTIFY_TYPES}from\"../types/notifyTypes\";import{POST_TYPES}from\"../types/postTypes\";import{createNewsNotify,removeNewsNotify}from\"./newsActions\";export var createPostAction=function createPostAction(_ref){var content=_ref.content,images=_ref.images,auth=_ref.auth,socket=_ref.socket;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var media,res,msg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:media=[];_context.prev=1;dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{loading:true}});if(!(images.length>0)){_context.next=7;break;}_context.next=6;return imageUpload(images);case 6:media=_context.sent;case 7:_context.next=9;return postDataAPI(\"posts\",{content:content,images:media},auth.token);case 9:res=_context.sent;dispatch({type:POST_TYPES.CREATE_POST,payload:_objectSpread(_objectSpread({},res.data.newPost),{},{user:auth.user})});dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{loading:false}});//Notify\nmsg={id:res.data.newPost._id,text:\"Added a new post.\",recipients:res.data.newPost.user.followers,url:\"/post/\".concat(res.data.newPost._id),content:content,image:media[0].url};dispatch(createNewsNotify({msg:msg,auth:auth,socket:socket}));_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context.t0.response.data.msg}});case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var updatePostAction=function updatePostAction(_ref3){var content=_ref3.content,images=_ref3.images,auth=_ref3.auth,status=_ref3.status;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var media,imgNewUrl,imgOldUrl,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:media=[];imgNewUrl=images.filter(function(img){return!img.url;});imgOldUrl=images.filter(function(img){return img.url;});if(!(status.content===content&&imgNewUrl.length===0&&imgOldUrl.length===status.images.length)){_context2.next=5;break;}return _context2.abrupt(\"return\");case 5:_context2.prev=5;dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{loading:true}});if(!(imgNewUrl.length>0)){_context2.next=11;break;}_context2.next=10;return imageUpload(imgNewUrl);case 10:media=_context2.sent;case 11:_context2.next=13;return patchDataAPI(\"post/\".concat(status._id),{content:content,images:[].concat(_toConsumableArray(imgOldUrl),_toConsumableArray(media))},auth.token);case 13:res=_context2.sent;dispatch({type:POST_TYPES.UPDATE_POST,payload:res.data.newPost});dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{loading:false}});_context2.next=21;break;case 18:_context2.prev=18;_context2.t0=_context2[\"catch\"](5);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context2.t0.response.data.msg}});case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[5,18]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};export var getPosts=function getPosts(token){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:POST_TYPES.LOADING_POST,payload:true});_context3.next=4;return getDataAPI(\"posts\",token);case 4:res=_context3.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},res.data),{},{page:2})});dispatch({type:POST_TYPES.LOADING_POST,payload:false});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context3.t0.response.data.msg}});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function(_x3){return _ref5.apply(this,arguments);};}();};export var getMorePosts=function getMorePosts(_ref6){var auth=_ref6.auth,page=_ref6.page;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return getDataAPI(\"posts?limit=\".concat(page*9),auth.token);case 3:res=_context4.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread({},res.data)});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context4.t0.response.data.msg}});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref7.apply(this,arguments);};}();};export var likePostAction=function likePostAction(_ref8){var post=_ref8.post,auth=_ref8.auth,socket=_ref8.socket;return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var newPost,res,msg;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:newPost=_objectSpread(_objectSpread({},post),{},{likes:[].concat(_toConsumableArray(post.likes),[auth.user])});dispatch({type:POST_TYPES.UPDATE_POST,payload:newPost});socket.emit(\"likePost\",newPost);_context5.prev=3;_context5.next=6;return patchDataAPI(\"post/\".concat(post._id,\"/like\"),null,auth.token);case 6:res=_context5.sent;dispatch({type:NOTIFY_TYPES.NOTIFY,payload:res.data.msg});//Notify\nmsg={id:auth.user._id,text:\"liked your post.\",recipients:[post.user._id],url:\"/post/\".concat(post._id),content:post.content,image:post.images[0].url};dispatch(createNewsNotify({msg:msg,auth:auth,socket:socket}));_context5.next=15;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](3);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context5.t0.response.data.msg}});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[3,12]]);}));return function(_x5){return _ref9.apply(this,arguments);};}();};export var unLikePostAction=function unLikePostAction(_ref10){var post=_ref10.post,auth=_ref10.auth,socket=_ref10.socket;return/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var newPost,res,msg;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:newPost=_objectSpread(_objectSpread({},post),{},{likes:post.likes.filter(function(like){return like._id!==auth.user._id;})});dispatch({type:POST_TYPES.UPDATE_POST,payload:newPost});socket.emit(\"unLikePost\",newPost);_context6.prev=3;_context6.next=6;return patchDataAPI(\"post/\".concat(post._id,\"/unlike\"),null,auth.token);case 6:res=_context6.sent;dispatch({type:NOTIFY_TYPES.NOTIFY,payload:res.data.msg});//Notify\nmsg={id:auth.user._id,text:\"liked your post.\",recipients:[post.user._id],url:\"/post/\".concat(post._id)};dispatch(removeNewsNotify({msg:msg,auth:auth,socket:socket}));_context6.next=15;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](3);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context6.t0.response.data.msg}});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[3,12]]);}));return function(_x6){return _ref11.apply(this,arguments);};}();};export var getPostDetail=function getPostDetail(_ref12){var detailPost=_ref12.detailPost,id=_ref12.id,auth=_ref12.auth;return/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!detailPost.every(function(post){return post._id!==id;})){_context7.next=11;break;}_context7.prev=1;_context7.next=4;return getDataAPI(\"post/\".concat(id),auth.token);case 4:res=_context7.sent;dispatch({type:POST_TYPES.GET_POST,payload:res.data.post});_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](1);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context7.t0.response.data.msg}});case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[1,8]]);}));return function(_x7){return _ref13.apply(this,arguments);};}();};export var deletePostAction=function deletePostAction(_ref14){var post=_ref14.post,auth=_ref14.auth,socket=_ref14.socket;return/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res,msg;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:dispatch({type:POST_TYPES.DELETE_POST,payload:post});_context8.prev=1;_context8.next=4;return deleteDataAPI(\"post/\".concat(post._id),auth.token);case 4:res=_context8.sent;//Notify\nmsg={id:post._id,text:\"Added a new post.\",recipients:res.data.newPost.user.followers,url:\"/post/\".concat(post._id)};dispatch(removeNewsNotify({msg:msg,auth:auth,socket:socket}));_context8.next=12;break;case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](1);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context8.t0.response.data.msg}});case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[1,9]]);}));return function(_x8){return _ref15.apply(this,arguments);};}();};export var savePostAction=function savePostAction(_ref16){var post=_ref16.post,auth=_ref16.auth;return/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var newUser;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:newUser=_objectSpread(_objectSpread({},auth.user),{},{saved:[].concat(_toConsumableArray(auth.user.saved),[post._id])});dispatch({type:AUTH_TYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:newUser})});_context9.prev=2;_context9.next=5;return patchDataAPI(\"savePost/\".concat(post._id),null,auth.token);case 5:_context9.next=10;break;case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](2);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context9.t0.response.data.msg}});case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[2,7]]);}));return function(_x9){return _ref17.apply(this,arguments);};}();};export var unSavePostAction=function unSavePostAction(_ref18){var post=_ref18.post,auth=_ref18.auth;return/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){var newUser;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:newUser=_objectSpread(_objectSpread({},auth.user),{},{saved:auth.user.saved.filter(function(id){return id!==post._id;})});dispatch({type:AUTH_TYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:newUser})});_context10.prev=2;_context10.next=5;return patchDataAPI(\"unSavePost/\".concat(post._id),null,auth.token);case 5:_context10.next=10;break;case 7:_context10.prev=7;_context10.t0=_context10[\"catch\"](2);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context10.t0.response.data.msg}});case 10:case\"end\":return _context10.stop();}}},_callee10,null,[[2,7]]);}));return function(_x10){return _ref19.apply(this,arguments);};}();};export var getRelatedPostAction=function getRelatedPostAction(_ref20){var post=_ref20.post,auth=_ref20.auth;return/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(dispatch){var res,relatedPost;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return getDataAPI(\"user_posts/\".concat(post.user._id,\"?limit=7\"),auth.token);case 3:res=_context11.sent;relatedPost=deleteData(res.data.posts,post._id);dispatch({type:POST_TYPES.GET_RELATED_POSTS,payload:relatedPost});_context11.next=11;break;case 8:_context11.prev=8;_context11.t0=_context11[\"catch\"](0);dispatch({type:NOTIFY_TYPES.NOTIFY,payload:{error:_context11.t0.response.data.msg}});case 11:case\"end\":return _context11.stop();}}},_callee11,null,[[0,8]]);}));return function(_x11){return _ref21.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/redux/actions/postActions.js"],"names":["deleteDataAPI","getDataAPI","patchDataAPI","postDataAPI","imageUpload","AUTH_TYPES","deleteData","editData","NOTIFY_TYPES","POST_TYPES","createNewsNotify","removeNewsNotify","createPostAction","content","images","auth","socket","dispatch","media","type","NOTIFY","payload","loading","length","token","res","CREATE_POST","data","newPost","user","msg","id","_id","text","recipients","followers","url","image","error","response","updatePostAction","status","imgNewUrl","filter","img","imgOldUrl","UPDATE_POST","getPosts","LOADING_POST","GET_POSTS","page","getMorePosts","likePostAction","post","likes","emit","unLikePostAction","like","getPostDetail","detailPost","every","GET_POST","deletePostAction","DELETE_POST","savePostAction","newUser","saved","AUTH","unSavePostAction","getRelatedPostAction","relatedPost","posts","GET_RELATED_POSTS"],"mappings":"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","sourcesContent":["import {\r\n  deleteDataAPI,\r\n  getDataAPI,\r\n  patchDataAPI,\r\n  postDataAPI,\r\n} from \"../../utils/fetchData\";\r\nimport { imageUpload } from \"../../utils/imageUpload\";\r\nimport { AUTH_TYPES } from \"../types/authTypes\";\r\nimport { deleteData, editData } from \"../types/globalTypes\";\r\nimport { NOTIFY_TYPES } from \"../types/notifyTypes\";\r\nimport { POST_TYPES } from \"../types/postTypes\";\r\nimport { createNewsNotify, removeNewsNotify } from \"./newsActions\";\r\n\r\nexport const createPostAction = ({ content, images, auth, socket }) => {\r\n  return async (dispatch) => {\r\n    let media = [];\r\n    try {\r\n      dispatch({ type: NOTIFY_TYPES.NOTIFY, payload: { loading: true } });\r\n      if (images.length > 0) media = await imageUpload(images);\r\n\r\n      const res = await postDataAPI(\r\n        \"posts\",\r\n        { content, images: media },\r\n        auth.token\r\n      );\r\n      dispatch({\r\n        type: POST_TYPES.CREATE_POST,\r\n        payload: { ...res.data.newPost, user: auth.user },\r\n      });\r\n\r\n      dispatch({ type: NOTIFY_TYPES.NOTIFY, payload: { loading: false } });\r\n\r\n      //Notify\r\n\r\n      const msg = {\r\n        id: res.data.newPost._id,\r\n        text: \"Added a new post.\",\r\n        recipients: res.data.newPost.user.followers,\r\n        url: `/post/${res.data.newPost._id}`,\r\n        content,\r\n        image: media[0].url,\r\n      };\r\n\r\n      dispatch(createNewsNotify({ msg, auth, socket }));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const updatePostAction = ({ content, images, auth, status }) => {\r\n  return async (dispatch) => {\r\n    let media = [];\r\n    const imgNewUrl = images.filter((img) => !img.url);\r\n    const imgOldUrl = images.filter((img) => img.url);\r\n\r\n    if (\r\n      status.content === content &&\r\n      imgNewUrl.length === 0 &&\r\n      imgOldUrl.length === status.images.length\r\n    )\r\n      return;\r\n\r\n    try {\r\n      dispatch({ type: NOTIFY_TYPES.NOTIFY, payload: { loading: true } });\r\n      if (imgNewUrl.length > 0) media = await imageUpload(imgNewUrl);\r\n\r\n      const res = await patchDataAPI(\r\n        `post/${status._id}`,\r\n        {\r\n          content,\r\n          images: [...imgOldUrl, ...media],\r\n        },\r\n        auth.token\r\n      );\r\n\r\n      dispatch({\r\n        type: POST_TYPES.UPDATE_POST,\r\n        payload: res.data.newPost,\r\n      });\r\n\r\n      dispatch({ type: NOTIFY_TYPES.NOTIFY, payload: { loading: false } });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const getPosts = (token) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch({ type: POST_TYPES.LOADING_POST, payload: true });\r\n      const res = await getDataAPI(\"posts\", token);\r\n      dispatch({\r\n        type: POST_TYPES.GET_POSTS,\r\n        payload: { ...res.data, page: 2 },\r\n      });\r\n      dispatch({ type: POST_TYPES.LOADING_POST, payload: false });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const getMorePosts = ({ auth, page }) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const res = await getDataAPI(`posts?limit=${page * 9}`, auth.token);\r\n      dispatch({\r\n        type: POST_TYPES.GET_POSTS,\r\n        payload: { ...res.data },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const likePostAction = ({ post, auth, socket }) => {\r\n  return async (dispatch) => {\r\n    const newPost = { ...post, likes: [...post.likes, auth.user] };\r\n    dispatch({\r\n      type: POST_TYPES.UPDATE_POST,\r\n      payload: newPost,\r\n    });\r\n\r\n    socket.emit(\"likePost\", newPost);\r\n    try {\r\n      const res = await patchDataAPI(`post/${post._id}/like`, null, auth.token);\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: res.data.msg,\r\n      });\r\n\r\n      //Notify\r\n\r\n      const msg = {\r\n        id: auth.user._id,\r\n        text: \"liked your post.\",\r\n        recipients: [post.user._id],\r\n        url: `/post/${post._id}`,\r\n        content: post.content,\r\n        image: post.images[0].url,\r\n      };\r\n\r\n      dispatch(createNewsNotify({ msg, auth, socket }));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const unLikePostAction = ({ post, auth, socket }) => {\r\n  return async (dispatch) => {\r\n    const newPost = {\r\n      ...post,\r\n      likes: post.likes.filter((like) => like._id !== auth.user._id),\r\n    };\r\n\r\n    dispatch({\r\n      type: POST_TYPES.UPDATE_POST,\r\n      payload: newPost,\r\n    });\r\n    socket.emit(\"unLikePost\", newPost);\r\n\r\n    try {\r\n      const res = await patchDataAPI(\r\n        `post/${post._id}/unlike`,\r\n        null,\r\n        auth.token\r\n      );\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: res.data.msg,\r\n      });\r\n\r\n      //Notify\r\n\r\n      const msg = {\r\n        id: auth.user._id,\r\n        text: \"liked your post.\",\r\n        recipients: [post.user._id],\r\n        url: `/post/${post._id}`,\r\n      };\r\n\r\n      dispatch(removeNewsNotify({ msg, auth, socket }));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const getPostDetail = ({ detailPost, id, auth }) => {\r\n  return async (dispatch) => {\r\n    if (detailPost.every((post) => post._id !== id)) {\r\n      try {\r\n        const res = await getDataAPI(`post/${id}`, auth.token);\r\n        dispatch({\r\n          type: POST_TYPES.GET_POST,\r\n          payload: res.data.post,\r\n        });\r\n      } catch (err) {\r\n        dispatch({\r\n          type: NOTIFY_TYPES.NOTIFY,\r\n          payload: { error: err.response.data.msg },\r\n        });\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport const deletePostAction = ({ post, auth, socket }) => {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: POST_TYPES.DELETE_POST,\r\n      payload: post,\r\n    });\r\n\r\n    try {\r\n      const res = await deleteDataAPI(`post/${post._id}`, auth.token);\r\n\r\n      //Notify\r\n\r\n      const msg = {\r\n        id: post._id,\r\n        text: \"Added a new post.\",\r\n        recipients: res.data.newPost.user.followers,\r\n        url: `/post/${post._id}`,\r\n      };\r\n\r\n      dispatch(removeNewsNotify({ msg, auth, socket }));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const savePostAction = ({ post, auth }) => {\r\n  return async (dispatch) => {\r\n    const newUser = { ...auth.user, saved: [...auth.user.saved, post._id] };\r\n    dispatch({\r\n      type: AUTH_TYPES.AUTH,\r\n      payload: { ...auth, user: newUser },\r\n    });\r\n\r\n    try {\r\n      await patchDataAPI(`savePost/${post._id}`, null, auth.token);\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const unSavePostAction = ({ post, auth }) => {\r\n  return async (dispatch) => {\r\n    const newUser = {\r\n      ...auth.user,\r\n      saved: auth.user.saved.filter((id) => id !== post._id),\r\n    };\r\n\r\n    dispatch({\r\n      type: AUTH_TYPES.AUTH,\r\n      payload: { ...auth, user: newUser },\r\n    });\r\n\r\n    try {\r\n      await patchDataAPI(`unSavePost/${post._id}`, null, auth.token);\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const getRelatedPostAction = ({ post, auth }) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const res = await getDataAPI(\r\n        `user_posts/${post.user._id}?limit=7`,\r\n        auth.token\r\n      );\r\n      const relatedPost = deleteData(res.data.posts, post._id);\r\n      dispatch({\r\n        type: POST_TYPES.GET_RELATED_POSTS,\r\n        payload: relatedPost,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: NOTIFY_TYPES.NOTIFY,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}