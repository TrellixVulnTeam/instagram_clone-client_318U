{"ast":null,"code":"import React from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import ProfileIcon from\"../../ProfileIcon\";import\"./index.scss\";import moment from\"moment\";import{deleteAllNotifies,isReadNotify}from\"../../../redux/actions/newsActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Notifications=function Notifications(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,news=_useSelector.news;var dispatch=useDispatch();var handleIsRead=function handleIsRead(msg){dispatch(isReadNotify({msg:msg,auth:auth}));};var handleDeleteAll=function handleDeleteAll(){var newArr=news.data.filter(function(item){return item.isRead===false;});if(newArr.length===0)return dispatch(deleteAllNotifies(auth.token));if(window.confirm(\"You have \".concat(newArr.length,\" unread notices.Are you sure you want to delete them all ?\"))){return dispatch(deleteAllNotifies(auth.token));}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"notify-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notify-heading\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notifications\"}),/*#__PURE__*/_jsx(\"span\",{onClick:handleDeleteAll,children:\"Delete All\"})]}),news.data.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"notify-warning\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"No Notifications\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"notify-content\",children:news.data.map(function(msg,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Link,{to:\"\".concat(msg.url),className:\"notify-details\",onClick:function onClick(){return dispatch(function(){return handleIsRead(msg);});},children:[/*#__PURE__*/_jsx(\"div\",{className:\"notify-details-img\",children:/*#__PURE__*/_jsx(ProfileIcon,{src:msg.user.avatar,size:\"big-avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"notify-details-names\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notify-details-urls\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(msg.user._id),className:\"notify-details-links\",children:msg.user.username}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",msg.text]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"notify-details-date\",children:[msg.content&&/*#__PURE__*/_jsxs(\"small\",{children:[msg.content.slice(0,20),\"....\"]}),/*#__PURE__*/_jsx(\"small\",{style:{marginLeft:\"5px\",color:\"#8e8e8e\"},children:moment(msg.createAt).fromNow()}),!msg.isRead&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle notify-details-online\",style:{marginLeft:\"5px\"}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notofy-details-post\",children:msg.image&&/*#__PURE__*/_jsx(\"div\",{style:{width:\"30px\"},children:msg.image.match(/video/i)?/*#__PURE__*/_jsx(\"video\",{src:msg.image,width:\"100%\"}):/*#__PURE__*/_jsx(ProfileIcon,{src:msg.image,size:\"medium-avatar\"})})})]})},index);})})]})});};export default Notifications;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/components/Header/Notifications/index.js"],"names":["React","useDispatch","useSelector","Link","ProfileIcon","moment","deleteAllNotifies","isReadNotify","Notifications","state","auth","news","dispatch","handleIsRead","msg","handleDeleteAll","newArr","data","filter","item","isRead","length","token","window","confirm","map","index","url","user","avatar","_id","username","text","content","slice","marginLeft","color","createAt","fromNow","image","width","match"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProfileIcon from \"../../ProfileIcon\";\r\nimport \"./index.scss\";\r\nimport moment from \"moment\";\r\nimport {\r\n  deleteAllNotifies,\r\n  isReadNotify,\r\n} from \"../../../redux/actions/newsActions\";\r\nconst Notifications = () => {\r\n  const { auth, news } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleIsRead = (msg) => {\r\n    dispatch(isReadNotify({ msg, auth }));\r\n  };\r\n\r\n  const handleDeleteAll = () => {\r\n    const newArr = news.data.filter((item) => item.isRead === false);\r\n    if (newArr.length === 0) return dispatch(deleteAllNotifies(auth.token));\r\n\r\n    if (\r\n      window.confirm(\r\n        `You have ${newArr.length} unread notices.Are you sure you want to delete them all ?`\r\n      )\r\n    ) {\r\n      return dispatch(deleteAllNotifies(auth.token));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"notify-container\">\r\n        <div className=\"notify-heading\">\r\n          <h3>Notifications</h3>\r\n          {/* {news.sound ? (\r\n            <i className=\"fas fa-bell notify-bell\"></i>\r\n          ) : (\r\n            <i className=\"fas fa-bell-slash notify-bell\"></i>\r\n          )} */}\r\n          <span onClick={handleDeleteAll}>Delete All</span>\r\n        </div>\r\n        {news.data.length === 0 && (\r\n          <div className=\"notify-warning\">\r\n            <h4>No Notifications</h4>\r\n          </div>\r\n        )}\r\n        <div className=\"notify-content\">\r\n          {news.data.map((msg, index) => (\r\n            <div key={index}>\r\n              <Link\r\n                to={`${msg.url}`}\r\n                className=\"notify-details\"\r\n                onClick={() => dispatch(() => handleIsRead(msg))}\r\n              >\r\n                <div className=\"notify-details-img\">\r\n                  <ProfileIcon src={msg.user.avatar} size=\"big-avatar\" />\r\n                </div>\r\n                <div className=\"notify-details-names\">\r\n                  <div className=\"notify-details-urls\">\r\n                    <Link\r\n                      to={`/profile/${msg.user._id}`}\r\n                      className=\"notify-details-links\"\r\n                    >\r\n                      {msg.user.username}\r\n                    </Link>\r\n                    <span> {msg.text}</span>\r\n                  </div>\r\n                  <div className=\"notify-details-date\">\r\n                    {msg.content && (\r\n                      <small>{msg.content.slice(0, 20)}....</small>\r\n                    )}\r\n                    <small style={{ marginLeft: \"5px\", color: \"#8e8e8e\" }}>\r\n                      {moment(msg.createAt).fromNow()}\r\n                    </small>\r\n                    {!msg.isRead && (\r\n                      <i\r\n                        className=\"fas fa-circle notify-details-online\"\r\n                        style={{ marginLeft: \"5px\" }}\r\n                      ></i>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"notofy-details-post\">\r\n                  {msg.image && (\r\n                    <div style={{ width: \"30px\" }}>\r\n                      {msg.image.match(/video/i) ? (\r\n                        <video src={msg.image} width=\"100%\" />\r\n                      ) : (\r\n                        <ProfileIcon src={msg.image} size=\"medium-avatar\" />\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Notifications;\r\n"]},"metadata":{},"sourceType":"module"}