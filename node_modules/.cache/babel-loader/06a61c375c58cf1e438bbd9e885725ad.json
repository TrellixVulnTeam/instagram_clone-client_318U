{"ast":null,"code":"import _objectSpread from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{createCommentAction}from\"../../../redux/actions/commentActions\";import{STATUS_TYPES}from\"../../../redux/types/statusTypes\";import Icons from\"../../Icons\";import\"./index.scss\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InputComment=function InputComment(_ref){var children=_ref.children,post=_ref.post,onReply=_ref.onReply,setOnReply=_ref.setOnReply;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket,input=_useSelector.input,postModal=_useSelector.postModal;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var dispatch=useDispatch();var handleSubmit=function handleSubmit(e){e.preventDefault();if(!content.trim()){if(setOnReply)return setOnReply(false);return;}var newComments={content:content,likes:[],user:auth.user,createdAt:new Date().toISOString(),reply:onReply&&onReply.commentId,tag:onReply&&onReply.user};var newComment={content:content,likes:[],user:auth.user,createdAt:new Date().toISOString(),reply:undefined,tag:undefined};if(input.isReply){newComment=_objectSpread(_objectSpread({},newComment),{},{reply:input.commentId,tag:input.user});dispatch(createCommentAction({post:post,newComment:newComment,auth:auth,socket:socket,postModal:postModal}));}else{dispatch(createCommentAction({post:post,newComment:newComment,auth:auth,socket:socket,postModal:postModal}));}dispatch({type:STATUS_TYPES.ON_REPLY,payload:false});if(setOnReply)return setOnReply(false);setContent(\"\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"input-comments\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"input-form\",onSubmit:handleSubmit,children:[children,input.isReply&&/*#__PURE__*/_jsxs(Link,{to:\"/profile/\".concat(input.user._id),className:\"input-tag\",children:[\"@\",input.user.username,\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-comment\",value:content,onChange:function onChange(e){return setContent(e.target.value);},placeholder:\"Add a comment...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-icons\",children:/*#__PURE__*/_jsx(Icons,{setContent:setContent,content:content})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"input-btn\",disabled:content?false:true,style:{opacity:content?1:0.5},children:\"Post\"})]})})});};export default InputComment;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/components/Comments/InputComment/index.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","createCommentAction","STATUS_TYPES","Icons","InputComment","children","post","onReply","setOnReply","state","auth","socket","input","postModal","content","setContent","dispatch","handleSubmit","e","preventDefault","trim","newComments","likes","user","createdAt","Date","toISOString","reply","commentId","tag","newComment","undefined","isReply","type","ON_REPLY","payload","_id","username","target","value","opacity"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createCommentAction } from \"../../../redux/actions/commentActions\";\r\nimport { STATUS_TYPES } from \"../../../redux/types/statusTypes\";\r\nimport Icons from \"../../Icons\";\r\nimport \"./index.scss\";\r\nconst InputComment = ({ children, post, onReply, setOnReply }) => {\r\n  const { auth, socket, input, postModal } = useSelector((state) => state);\r\n  const [content, setContent] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!content.trim()) {\r\n      if (setOnReply) return setOnReply(false);\r\n      return;\r\n    }\r\n\r\n    const newComments = {\r\n      content,\r\n      likes: [],\r\n      user: auth.user,\r\n      createdAt: new Date().toISOString(),\r\n      reply: onReply && onReply.commentId,\r\n      tag: onReply && onReply.user,\r\n    };\r\n\r\n    let newComment = {\r\n      content,\r\n      likes: [],\r\n      user: auth.user,\r\n      createdAt: new Date().toISOString(),\r\n      reply: undefined,\r\n      tag: undefined,\r\n    };\r\n\r\n    if (input.isReply) {\r\n      newComment = {\r\n        ...newComment,\r\n        reply: input.commentId,\r\n        tag: input.user,\r\n      };\r\n      dispatch(\r\n        createCommentAction({ post, newComment, auth, socket, postModal })\r\n      );\r\n    } else {\r\n      dispatch(\r\n        createCommentAction({ post, newComment, auth, socket, postModal })\r\n      );\r\n    }\r\n    dispatch({\r\n      type: STATUS_TYPES.ON_REPLY,\r\n      payload: false,\r\n    });\r\n    if (setOnReply) return setOnReply(false);\r\n\r\n    setContent(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"input-comments\">\r\n        <form className=\"input-form\" onSubmit={handleSubmit}>\r\n          {children}\r\n          {input.isReply && (\r\n            <Link to={`/profile/${input.user._id}`} className=\"input-tag\">\r\n              @{input.user.username}{\" \"}\r\n            </Link>\r\n          )}\r\n          <input\r\n            type=\"text\"\r\n            className=\"input-comment\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            placeholder=\"Add a comment...\"\r\n          />\r\n\r\n          <div className=\"input-icons\">\r\n            <Icons setContent={setContent} content={content} />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"input-btn\"\r\n            disabled={content ? false : true}\r\n            style={{ opacity: content ? 1 : 0.5 }}\r\n          >\r\n            Post\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InputComment;\r\n"]},"metadata":{},"sourceType":"module"}