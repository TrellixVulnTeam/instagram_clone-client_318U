{"ast":null,"code":"import _objectSpread from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Benkia/MERN/instagram-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import moment from\"moment\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useHistory}from\"react-router-dom\";import{deletePostAction}from\"../../../redux/actions/postActions\";import{STATUS_TYPES}from\"../../../redux/types/statusTypes\";import{BASE_URL}from\"../../../utils/config\";import ProfileIcon from\"../../ProfileIcon\";import swal from\"sweetalert\";import\"./index.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CardHeader=function CardHeader(_ref){var post=_ref.post,handleCheck=_ref.handleCheck;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isShow=_useState2[0],setIsShow=_useState2[1];var history=useHistory();var handleEditPost=function handleEditPost(){dispatch({type:STATUS_TYPES.STATUS,payload:_objectSpread(_objectSpread({},post),{},{onEdit:true})});setIsShow(false);};var handleShowActions=function handleShowActions(){setIsShow(true);// dispatch({\n//   type: MODAL_TYPES.MODAL,\n//   payload: true,\n// });\n};var handleUnShowActions=function handleUnShowActions(){setIsShow(false);// dispatch({\n//   type: MODAL_TYPES.MODAL,\n//   payload: false,\n// });\n};var handleDeletePost=function handleDeletePost(){swal({title:\"Are you sure?\",text:\"Are you sure that you want to remove this post?\",icon:\"warning\",buttons:true,dangerMode:true}).then(function(willDelete){if(willDelete){dispatch(deletePostAction({post:post,auth:auth,socket:socket}));}});setIsShow(false);return history.push(\"/\");};var handleCopyLink=function handleCopyLink(){navigator.clipboard.writeText(\"\".concat(BASE_URL,\"/post/\").concat(post._id));handleUnShowActions();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-header-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header-img\",children:/*#__PURE__*/_jsx(ProfileIcon,{src:post.user.avatar,size:\"big-avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-header-name\",children:[/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(post.user._id),children:post.user.username})}),handleCheck&&/*#__PURE__*/_jsx(\"small\",{children:moment(post.createdAt).fromNow()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-header-dropdown\",onClick:handleShowActions,children:/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"more_horiz\"})}),isShow&&/*#__PURE__*/_jsx(\"div\",{className:\"card-header-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-header-menu\",children:[auth.user._id===post.user._id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header-items\",children:/*#__PURE__*/_jsx(\"span\",{className:\"card-header-actions red\",onClick:handleEditPost,children:\"Edit Post\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-header-items\",onClick:handleDeletePost,children:/*#__PURE__*/_jsx(\"span\",{className:\"card-header-actions red\",children:\"Delete Post\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-header-items\",onClick:handleUnShowActions,children:/*#__PURE__*/_jsx(\"span\",{className:\"card-header-actions\",children:\"Cancel\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-header-items\",onClick:handleCopyLink,children:/*#__PURE__*/_jsx(\"span\",{className:\"card-header-actions\",children:\"Copy Link\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-header-items\",onClick:handleUnShowActions,children:/*#__PURE__*/_jsx(\"span\",{className:\"card-header-actions\",children:\"Cancel\"})})]})})]})})});};export default CardHeader;","map":{"version":3,"sources":["C:/Benkia/MERN/instagram-clone/client/src/components/PostCards/CardHeader/index.js"],"names":["moment","React","useState","useDispatch","useSelector","Link","useHistory","deletePostAction","STATUS_TYPES","BASE_URL","ProfileIcon","swal","CardHeader","post","handleCheck","state","auth","socket","dispatch","isShow","setIsShow","history","handleEditPost","type","STATUS","payload","onEdit","handleShowActions","handleUnShowActions","handleDeletePost","title","text","icon","buttons","dangerMode","then","willDelete","push","handleCopyLink","navigator","clipboard","writeText","_id","user","avatar","username","createdAt","fromNow"],"mappings":"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","sourcesContent":["import moment from \"moment\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { deletePostAction } from \"../../../redux/actions/postActions\";\r\nimport { STATUS_TYPES } from \"../../../redux/types/statusTypes\";\r\nimport { BASE_URL } from \"../../../utils/config\";\r\nimport ProfileIcon from \"../../ProfileIcon\";\r\nimport swal from \"sweetalert\";\r\nimport \"./index.scss\";\r\nconst CardHeader = ({ post, handleCheck }) => {\r\n  const { auth, socket } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const [isShow, setIsShow] = useState(false);\r\n  const history = useHistory();\r\n  const handleEditPost = () => {\r\n    dispatch({ type: STATUS_TYPES.STATUS, payload: { ...post, onEdit: true } });\r\n    setIsShow(false);\r\n  };\r\n\r\n  const handleShowActions = () => {\r\n    setIsShow(true);\r\n    // dispatch({\r\n    //   type: MODAL_TYPES.MODAL,\r\n    //   payload: true,\r\n    // });\r\n  };\r\n\r\n  const handleUnShowActions = () => {\r\n    setIsShow(false);\r\n    // dispatch({\r\n    //   type: MODAL_TYPES.MODAL,\r\n    //   payload: false,\r\n    // });\r\n  };\r\n\r\n  const handleDeletePost = () => {\r\n    swal({\r\n      title: \"Are you sure?\",\r\n      text: \"Are you sure that you want to remove this post?\",\r\n      icon: \"warning\",\r\n      buttons: true,\r\n      dangerMode: true,\r\n    }).then((willDelete) => {\r\n      if (willDelete) {\r\n        dispatch(deletePostAction({ post, auth, socket }));\r\n      }\r\n    });\r\n    setIsShow(false);\r\n    return history.push(\"/\");\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    navigator.clipboard.writeText(`${BASE_URL}/post/${post._id}`);\r\n    handleUnShowActions();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"card-header\">\r\n        <div className=\"card-header-content\">\r\n          <div className=\"card-header-img\">\r\n            <ProfileIcon src={post.user.avatar} size=\"big-avatar\" />\r\n          </div>\r\n\r\n          <div className=\"card-header-name\">\r\n            <h6>\r\n              <Link to={`/profile/${post.user._id}`}>{post.user.username}</Link>\r\n            </h6>\r\n            {handleCheck && <small>{moment(post.createdAt).fromNow()}</small>}\r\n          </div>\r\n\r\n          <div className=\"card-header-dropdown\" onClick={handleShowActions}>\r\n            <span className=\"material-icons\">more_horiz</span>\r\n          </div>\r\n\r\n          {isShow && (\r\n            <div className=\"card-header-modal\">\r\n              <div className=\"card-header-menu\">\r\n                {auth.user._id === post.user._id && (\r\n                  <>\r\n                    <div className=\"card-header-items\">\r\n                      <span\r\n                        className=\"card-header-actions red\"\r\n                        onClick={handleEditPost}\r\n                      >\r\n                        Edit Post\r\n                      </span>\r\n                    </div>\r\n                    <div\r\n                      className=\"card-header-items\"\r\n                      onClick={handleDeletePost}\r\n                    >\r\n                      <span className=\"card-header-actions red\">\r\n                        Delete Post\r\n                      </span>\r\n                    </div>\r\n                    <div\r\n                      className=\"card-header-items\"\r\n                      onClick={handleUnShowActions}\r\n                    >\r\n                      <span className=\"card-header-actions\">Cancel</span>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                <div className=\"card-header-items\" onClick={handleCopyLink}>\r\n                  <span className=\"card-header-actions\">Copy Link</span>\r\n                </div>\r\n                <div\r\n                  className=\"card-header-items\"\r\n                  onClick={handleUnShowActions}\r\n                >\r\n                  <span className=\"card-header-actions\">Cancel</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CardHeader;\r\n"]},"metadata":{},"sourceType":"module"}